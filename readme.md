# Kode Team
Проект отборочного этапа стажировки в компанию [KODE](https://kode.ru/). <br />
Демо: [dev.kode.infseeker.ru](https://dev.kode.infseeker.ru)

## Оценка и затраты времени на выполнение задач
| Задачи | Оценка (ч.) | Затраты (ч.) |
| ------ | ------ | ------ |
| **Основные задачи** | | |
| 0.0. Изучение требований к проекту, выбор технологического стека | 2 | 3 |
| 0.1. Изучение основ Axios  | 1 | 0.5 |
| 0.2. Изучение основ React Router  | 2 | 1.5 |
| 0.3. Изучение основ Effector  | 2 | 8 |
| 0.4. Изучение основ Styled Components  | 2 | 2 |
| 1. Инициализация проекта, настройка окружения | 2 | 1.5 |
| 2. Создание базовой структуры проекта | 1 | 0.5 |
| 3. Реализация модели пользователя | 1 | 2 |
| 4. Реализация API-сервиса пользователя | 2 | 2.5 |
| 5. Реализация методов для работы с Date и Date String | 1 | 1.5 |
| 6. Реализация базовой логики хранилища пользователей | 2 | 2 |
| 7. Реализация фильтров пользователей на уровне хранилища | 2 | 2 |
| 8. Реализация поиска пользователей на уровне хранилища | 2 | 4 |
| 9. Реализация компонента списка пользователей  | 2 | 4.5 |
| 10. Реализация компонента фильтров пользователей | 2 | 3 |
| 11. Реализация компонента поиска | 2 | 2.5 |
| 12. Реализация компонента деталей пользователя | 2 | 3.5 |
| 13. Реализация роутинга для компонента деталей пользователя | 2 | 2.5 |
| 14. Реализация компонента выбора сортировки | 2 | 4 |
| 15. Реализация индикатора загрузки данных пользователей | 2 | 1.5 |
| 16. Стилизация компонента списка пользователей | 2 | 1.5 |
| 17. Стилизация компонента фильтров пользователей | 0.5 | 3 |
| 18. Стилизация компонента поиска | 0.5 | 3 |
| 19. Стилизация компонента деталей пользователя | 0.5 | 1.5 |
| 20. Стилизация компонента выбора сортировки | 0.5 | 2 |
| 21. Ручное тестирование основного функционала | 0.5 | 0.5 |
| 22. Исправление ошибок, найденных во время тестирования | 2 | 1 |
| **Дополнительные задачи** | | |
| 1. Описание преимуществ и недостатков клиентской и серверной фильтрации данных | 0.5 | 0.5 |
| 2. Реализация real-time отслеживания состояния сети устройства | 2 | 1.5 |
| 3. Реализация сохранения состояния фильтрации и поиска | 2 | 2 |
| 4. Реализация кэширования результатов запроса по различным параметрам | 2 | 2 |
| 5. Рефакторинг | 1 | 2 |
| 6. Ручное тестирование всего проекта | 0.5 | 0.5 |
| 7. Исправление ошибок, найденных во время тестирования | 2 | 1 |

## Примечания
1. Преимущества и недостатки фильтрации данных на клиенте и на сервере

| Клиент | Сервер |
| ------ | ------ |
| **Преимущества** | |
| Нет дополнительной нагрузки на сервер | Безопасность данных, т.к. запросы и данные проходят валидацию |
| Быстродействие, т.к. не нужно получать данные с удалённого сервера | На клиент приходят только необходимые данные (актуально, если нужно обработать большие массивы данных) |
| **Недостатки** | |
| Низкая безопасность данных | Дополнительная нагрузка на сервер |
| Низкая производительность в случае обработки относительно больших массивов данных | Медленнее отдача данных, т.к. данные нужно обработать и отдать по сети |

2. Список фильтров по подразделениям [Departments.ts](https://github.com/infseeker/kode-team/blob/master/src/enums/Departments.ts) реализован как кастомный объект (а не ``enum``) с объектами типа ``User`` в качестве свойств, т.к. было необходимо хранить данные названия подразделения и значение для запроса к серверу. ``BackOffice: { name: 'Back Office', value: 'back_office' }``. Это же касается и [UserSortingTypes.ts](https://github.com/infseeker/kode-team/blob/master/src/enums/UserSortingTypes.ts).

3. Получение изображений пользователей ``users?__example=all`` реализовано путём добавления параметра ``&u=${user.id}`` к ссылке ``https://api.lorem.space/image/face?w=120&h=120``, чтобы в ``<img>`` происходило обращение к разным URL и показывались разные изображения для каждого пользователя. Если не добавлять дополнительные данные к ссылке изображения, то будет показываться одно и то же изображение для каждого пользователя.

4. При попытке получить изображения пользователей напрямую посредством отдельного запроса ``https://api.lorem.space/image/face?w=120&h=120`` (в том числе с использованием доп. параметра ``&u={user.id}``) к каждой картинке из JS возникала ошибка CORS ``Access to XMLHttpRequest has been blocked by CORS policy``. При попытке получить данные изображения через canvas также возникала ошибка ``Tainted canvases may not be exported``. При попытке получить прямую ссылку на изображение при помощи прокси ``https://cors-anywhere.herokuapp.com``, сервер выдавал ``403`` ошибку. Иных способов получить данные изображений пользователей из запроса ``users?__example=...`` для их дальнейшего кэширования найти не удалось.

## Технологический стек
1. React + React Router
2. Effector + Patronum
3. Axios
4. Styled Components
5. TypeScript